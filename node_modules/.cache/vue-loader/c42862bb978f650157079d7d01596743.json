{"remainingRequest":"E:\\Vue\\vue进阶\\2\\player\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Vue\\vue进阶\\2\\player\\src\\views\\07.mv.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Vue\\vue进阶\\2\\player\\src\\views\\07.mv.vue","mtime":1603683955723},{"path":"E:\\Vue\\vue进阶\\2\\player\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Vue\\vue进阶\\2\\player\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\Vue\\vue进阶\\2\\player\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Vue\\vue进阶\\2\\player\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDlr7zlhaUgYXhpb3MNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJtdiIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgdG90YWw6IDIwLA0KICAgICAgLy8g6aG156CBDQogICAgICBwYWdlOiAxLA0KICAgICAgLy8g6aG15a656YePDQogICAgICBsaW1pdDogMTAsDQogICAgICAvLyBtduWcsOWdgA0KICAgICAgdXJsOiAiIiwNCiAgICAgIC8vIOebuOWFs212DQogICAgICBzaW1pTXZzOiBbXSwNCiAgICAgIC8vIG1255qE5L+h5oGvDQogICAgICBtdkluZm86IHt9LA0KICAgICAgLy8g5aS05YOPDQogICAgICBpY29uOicnLA0KICAgICAgLy/ng63pl6jor4TorroNCiAgICAgIGhvdENvbW1lbnRzOltdLA0KICAgICAgaG90VG90YWw6MCwNCiAgICAgIC8v5pmu6YCa6K+E6K665pWwDQogICAgICBjb21Ub3RhbDowLA0KICAgICAgY29tbWVudHM6W10NCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIOiOt+WPlm125pKt5pS+5Zyw5Z2ADQogICAgYXhpb3Moew0KICAgICAgdXJsOiAiaHR0cHM6Ly9hdXR1bW5maXNoLmNuL212L3VybCIsDQogICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIC8vIOiOt+WPlnVybOS4reeahCBpZA0KDQogICAgICAgIGlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5xDQogICAgICB9DQogICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgLy8gY29uc29sZS5sb2cocmVzKQ0KICAgICAgdGhpcy51cmwgPSByZXMuZGF0YS5kYXRhLnVybDsNCiAgICB9KTsNCiAgICAvLyDojrflj5Yg55u45YWz55qEbXYNCiAgICBheGlvcyh7DQogICAgICB1cmw6ICJodHRwczovL2F1dHVtbmZpc2guY24vc2ltaS9tdiIsDQogICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgcGFyYW1zOiB7DQogICAgICAgIG12aWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnENCiAgICAgIH0NCiAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAvLyBjb25zb2xlLmxvZyhyZXMpDQogICAgICAvLyDkv53lrZjnm7jlhbNNVg0KICAgICAgdGhpcy5zaW1pTXZzID0gcmVzLmRhdGEubXZzOw0KICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLnNpbWlNdnMubGVuZ3RoO2krKyl7DQogICAgICAgICAgaWYodGhpcy5zaW1pTXZzW2ldLnBsYXlDb3VudD4xMDAwMDApew0KICAgICAgICAgICAgICB0aGlzLnNpbWlNdnNbaV0ucGxheUNvdW50PXBhcnNlSW50KHRoaXMuc2ltaU12c1tpXS5wbGF5Q291bnQvMTAwMDApKyfkuIcnDQogICAgICAgICAgICB9DQogICAgICAgICAgbGV0IGR1cmF0aW9uID0gdGhpcy5zaW1pTXZzW2ldLmR1cmF0aW9uOyAgDQogICAgICAgICAgbGV0IG1pbiA9IHBhcnNlSW50KGR1cmF0aW9uLzEwMDAvNjApOw0KICAgICAgICAgIGlmKG1pbjwxMCl7DQogICAgICAgICAgICBtaW49JzAnK21pbg0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgc2VjID0gcGFyc2VJbnQoZHVyYXRpb24vMTAwMCU2MCkNCiAgICAgICAgICBpZihzZWM8MTApew0KICAgICAgICAgICAgc2VjPScwJytzZWMNCiAgICAgICAgICB9DQogICAgICAgICAgLy9jb25zb2xlLmxvZyhtaW4rIiAiK3NlYykNCiAgICAgICAgICB0aGlzLnNpbWlNdnNbaV0uZHVyYXRpb249YCR7bWlufToke3NlY31gDQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIOiOt+WPliBtdueahOS/oeaBrw0KICAgIGF4aW9zKHsNCiAgICAgIHVybDogImh0dHBzOi8vYXV0dW1uZmlzaC5jbi9tdi9kZXRhaWwiLA0KICAgICAgbWV0aG9kOiAiZ2V0IiwNCiAgICAgIHBhcmFtczogew0KICAgICAgICBtdmlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5xDQogICAgICB9DQogICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgLy8gY29uc29sZS5sb2cocmVzKQ0KICAgICAgLy8gbXbnmoTkv6Hmga8NCiAgICAgIHRoaXMubXZJbmZvID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgIC8vIOiOt+WPliDmrYzmiYvkv6Hmga8NCiAgICAgIGF4aW9zKHsNCiAgICAgICAgdXJsOiAiaHR0cHM6Ly9hdXR1bW5maXNoLmNuL2FydGlzdHMiLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBpZDogdGhpcy5tdkluZm8uYXJ0aXN0c1swXS5pZA0KICAgICAgICB9DQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgIC8vIOatjOaJi+eahOWwgemdouS/oeaBrw0KICAgICAgICB0aGlzLmljb24gPSByZXMuZGF0YS5hcnRpc3QucGljVXJsDQogICAgICB9KTsNCiAgICB9KTsNCiAgICB0aGlzLmdldGNvbW1lbnRzKCk7DQogICAgLy8g6I635Y+W6K+E6K665pWw5o2uDQogIC8vICAgYXhpb3Moew0KICAvLyAgICAgdXJsOiJodHRwczovL2F1dHVtbmZpc2guY24vY29tbWVudC9tdiIsDQogIC8vICAgICBtZXRob2Q6J2dldCcsDQogIC8vICAgICBwYXJhbXM6ew0KICAvLyAgICAgICBpZDp0aGlzLiRyb3V0ZS5xdWVyeS5xLA0KICAvLyAgICAgICBsaW1pdDoxMCwNCiAgLy8gICAgICAgb2Zmc2V0OjANCiAgLy8gICAgIH0NCiAgLy8gICB9KS50aGVuKHJlcz0+ew0KICAvLyAgICAgY29uc29sZS5sb2cocmVzKQ0KICAvLyAgIH0pDQogICB9LA0KICBtZXRob2RzOiB7DQoNCiAgICAgZ2V0TXZMaXN0KCl7DQogICAgIGF4aW9zKHsNCiAgICAgIHVybDonIGh0dHBzOi8vYXV0dW1uZmlzaC5jbi9jb21tZW50L212JywNCiAgICAgIG1ldGhvZDonZ2V0JywNCiAgICAgIHBhcmFtczp7DQogICAgICAgIGlkOnRoaXMuJHJvdXRlLnF1ZXJ5LnEsDQogICAgICAgIGxpbWl0OnRoaXMubGltaXQsDQogICAgICAgIG9mZnNldDoodGhpcy5wYWdlLTEpKnRoaXMubGltaXQNCiAgICAgIH0NCiAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgdGhpcy5ob3RDb21tZW50cz1yZXMuZGF0YS5ob3RDb21tZW50czsNCiAgICAgIHRoaXMuY29tbWVudHM9cmVzLmRhdGEuY29tbWVudHM7DQogICAgfSkNCiAgICB9LA0KICAgIC8v6K+E6K66DQogICAgZ2V0Y29tbWVudHMoKXsNCiAgICAgICAvL2126K+E6K66DQogICBheGlvcyh7DQogICAgICB1cmw6JyBodHRwczovL2F1dHVtbmZpc2guY24vY29tbWVudC9tdicsDQogICAgICBtZXRob2Q6J2dldCcsDQogICAgICBwYXJhbXM6ew0KICAgICAgICBpZDp0aGlzLiRyb3V0ZS5xdWVyeS5xLA0KICAgICAgICBsaW1pdDp0aGlzLmxpbWl0LA0KICAgICAgICBvZmZzZXQ6KHRoaXMucGFnZS0xKSp0aGlzLmxpbWl0DQogICAgICB9DQogICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgLy9jb25zb2xlLmxvZyhyZXMpOw0KICAgICAgdGhpcy5ob3RDb21tZW50cz1yZXMuZGF0YS5ob3RDb21tZW50czsNCiAgICAgIHRoaXMuaG90VG90YWw9dGhpcy5ob3RDb21tZW50cy5sZW5ndGg7DQogICAgICB0aGlzLmNvbW1lbnRzPXJlcy5kYXRhLmNvbW1lbnRzOw0KICAgICAgdGhpcy50b3RhbD1yZXMuZGF0YS50b3RhbDsNCiAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5ob3RDb21tZW50cy5sZW5ndGg7aSsrKXsNCiAgICAgICAgICB2YXIgdW5peFRpbWVzdGFtcCA9IG5ldyBEYXRlKHRoaXMuaG90Q29tbWVudHNbaV0udGltZSkgOw0KICAgICAgICAgIC8v6YeN6L295pa55rOVDQogICAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmhvdXIgPSB0aGlzLmdldEhvdXJzKCkgPCAxMCA/ICIwIiArIHRoaXMuZ2V0SG91cnMoKSA6IHRoaXMuZ2V0SG91cnMoKTsNCiAgICAgICAgICAgICAgICB0aGlzLm1pbnV0ZSA9IHRoaXMuZ2V0TWludXRlcygpIDwgMTAgPyAiMCIgKyB0aGlzLmdldE1pbnV0ZXMoKSA6IHRoaXMuZ2V0TWludXRlcygpOw0KICAgICAgICAgICAgICAgIHRoaXMuc2Vjb25kID0gdGhpcy5nZXRTZWNvbmRzKCkgPCAxMCA/ICIwIiArIHRoaXMuZ2V0U2Vjb25kcygpIDogdGhpcy5nZXRTZWNvbmRzKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RnVsbFllYXIoKSArICIvIiArICh0aGlzLmdldE1vbnRoKCkgKyAxKSArICIvIiArIHRoaXMuZ2V0RGF0ZSgpICsgIi8gIiArIHRoaXMuaG91ciAgKyAiOiIgKyB0aGlzLm1pbnV0ZSArICI6IiArIHRoaXMuc2Vjb25kOw0KICAgICAgICAgIH07DQogICAgICAgICAgdGhpcy5ob3RDb21tZW50c1tpXS50aW1lID0gdW5peFRpbWVzdGFtcC50b0xvY2FsZVN0cmluZygpOw0KICAgICAgICB9DQogICAgICAgICBmb3IobGV0IGk9MDtpPHRoaXMuY29tbWVudHMubGVuZ3RoO2krKyl7DQogICAgICAgICAgdmFyIHVuaXhUaW1lc3RhbXAgPSBuZXcgRGF0ZSh0aGlzLmNvbW1lbnRzW2ldLnRpbWUpIDsNCiAgICAgICAgICAvL+mHjei9veaWueazlQ0KICAgICAgICAgIERhdGUucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdGhpcy5ob3VyID0gdGhpcy5nZXRIb3VycygpIDwgMTAgPyAiMCIgKyB0aGlzLmdldEhvdXJzKCkgOiB0aGlzLmdldEhvdXJzKCk7DQogICAgICAgICAgICAgICAgdGhpcy5taW51dGUgPSB0aGlzLmdldE1pbnV0ZXMoKSA8IDEwID8gIjAiICsgdGhpcy5nZXRNaW51dGVzKCkgOiB0aGlzLmdldE1pbnV0ZXMoKTsNCiAgICAgICAgICAgICAgICB0aGlzLnNlY29uZCA9IHRoaXMuZ2V0U2Vjb25kcygpIDwgMTAgPyAiMCIgKyB0aGlzLmdldFNlY29uZHMoKSA6IHRoaXMuZ2V0U2Vjb25kcygpOw0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZ1bGxZZWFyKCkgKyAiLyIgKyAodGhpcy5nZXRNb250aCgpICsgMSkgKyAiLyIgKyB0aGlzLmdldERhdGUoKSArICIvICIgKyB0aGlzLmhvdXIgICsgIjoiICsgdGhpcy5taW51dGUgKyAiOiIgKyB0aGlzLnNlY29uZDsNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHRoaXMuY29tbWVudHNbaV0udGltZSA9IHVuaXhUaW1lc3RhbXAudG9Mb2NhbGVTdHJpbmcoKTsNCiAgICAgICAgfQ0KICAgIH0pDQogICAgfSwNCiAgICAvLyDljrttduivpuaDhemhtQ0KICAgICAgdG9NVihpZCl7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL212P3E9JHtpZH1gKQ0KCQkJdGhpcy4kcm91dGVyLmdvKDApDQogICAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2U9dmFsOw0KICAgICAgdGhpcy5nZXRNdkxpc3QoKQ0KICAgICAgdGhpcy5nZXRjb21tZW50cygpDQogICAgfQ0KICANCiAgfSwNCiAgDQogIA0KfTsNCg=="},{"version":3,"sources":["07.mv.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA","file":"07.mv.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"mv-container\">\r\n    <div class=\"mv-wrap\">\r\n      <h3 class=\"title\">mv详情</h3>\r\n      <!-- mv -->\r\n      <div class=\"video-wrap\">\r\n        <video controls :src=\"url\"></video>\r\n      </div>\r\n      <!-- mv信息 -->\r\n      <div class=\"info-wrap\">\r\n        <div class=\"singer-info\">\r\n          <div class=\"avatar-wrap\">\r\n            <!-- 头像 -->\r\n            <img :src=\"icon\" alt=\"\" />\r\n          </div>\r\n          <!-- 歌手名 -->\r\n          <span class=\"name\">{{ mvInfo.artistName }}</span>\r\n        </div>\r\n        <div class=\"mv-info\">\r\n          <!-- 标题 -->\r\n          <h2 class=\"title\">{{ mvInfo.name }}</h2>\r\n          <span class=\"date\">发布：{{ mvInfo.publishTime }}</span>\r\n          <!-- 播放次数 -->\r\n          <span class=\"number\">播放：{{ mvInfo.playCount }}次</span>\r\n          <!-- 描述 -->\r\n          <p class=\"desc\">\r\n            {{ mvInfo.desc }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n       <!-- 精彩评论 -->\r\n        <div class=\"comment-wrap\">\r\n          <p class=\"title\">精彩评论<span class=\"number\">({{hotCount}})</span></p>\r\n          <div class=\"comments-wrap\">\r\n              <!-- 评论 -->\r\n            <div class=\"item\" v-for=\"(item, index) in hotComment\" :key=\"index\">\r\n              <div class=\"icon-wrap\">\r\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\r\n              </div>\r\n              <div class=\"content-wrap\">\r\n                <div class=\"content\">\r\n                    <!-- 昵称 -->\r\n                  <span class=\"name\">{{item.user.nickname}}</span>\r\n                  <span class=\"comment\">{{item.content}}</span>\r\n                </div>\r\n                <div class=\"re-content\" v-if=\"item.beReplied.length!=0\">\r\n                  <span class=\"name\">{{item.beReplied[0].user.nickname}}</span>\r\n                  <span class=\"comment\">{{item.beReplied[0].content}}</span>\r\n                </div>\r\n                <div class=\"date\">{{ item.time}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 最新评论 -->\r\n        <div class=\"comment-wrap\">\r\n          <p class=\"title\">最新评论<span class=\"number\">({{ total }})</span></p>\r\n          <div class=\"comments-wrap\" v-if=\"comments.length != 0\" >\r\n            <div class=\"item\" v-for=\"item in comments\" :key=\"item.commentId\">\r\n              <div class=\"icon-wrap\">\r\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\r\n              </div>\r\n              <div class=\"content-wrap\">\r\n                <div class=\"content\">\r\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\r\n                  <span class=\"comment\">{{ item.content }}</span>\r\n                </div>\r\n                <div class=\"re-content\" v-if=\"item.beReplied.length != 0\">\r\n                  <span class=\"name\">{{ item.beReplied[0].user.nickname }}：</span>\r\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\r\n                </div>\r\n                <div class=\"date\">{{ item.time }}</div>\r\n              </div>\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n      <!-- 分页器 -->\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        background\r\n        layout=\"prev, pager, next\"\r\n        :total=\"total\"\r\n        :current-page=\"page\"\r\n        :page-size=\"5\"\r\n        :limit=\"limit\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <div class=\"mv-recommend\">\r\n      <h3 class=\"title\">相关推荐</h3>\r\n      <div class=\"mvs\">\r\n        <div class=\"items\">\r\n          <div v-for=\"(item, index) in simiMvs\" :key=\"index\" class=\"item\">\r\n            <div class=\"img-wrap\">\r\n              <img :src=\"item.cover\" alt=\"\" />\r\n              <span class=\"iconfont icon-play\" @click=\"to\"></span>\r\n              <div class=\"num-wrap\">\r\n                <div class=\"iconfont icon-play\"></div>\r\n                <div class=\"num\">{{ item.playCount }}</div>\r\n              </div>\r\n              <span class=\"time\">{{ item.duration }}</span>\r\n            </div>\r\n            <div class=\"info-wrap\">\r\n              <div class=\"name\">{{ item.name }}</div>\r\n              <div class=\"singer\">{{ item.artistName }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入 axios\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"mv\",\r\n  data() {\r\n    return {\r\n      // 总条数\r\n      total: 20,\r\n      // 页码\r\n      page: 1,\r\n      // 页容量\r\n      limit: 10,\r\n      // mv地址\r\n      url: \"\",\r\n      // 相关mv\r\n      simiMvs: [],\r\n      // mv的信息\r\n      mvInfo: {},\r\n      // 头像\r\n      icon:'',\r\n      //热门评论\r\n      hotComments:[],\r\n      hotTotal:0,\r\n      //普通评论数\r\n      comTotal:0,\r\n      comments:[]\r\n    };\r\n  },\r\n  created() {\r\n    // 获取mv播放地址\r\n    axios({\r\n      url: \"https://autumnfish.cn/mv/url\",\r\n      method: \"get\",\r\n      params: {\r\n        // 获取url中的 id\r\n\r\n        id: this.$route.query.q\r\n      }\r\n    }).then(res => {\r\n      // console.log(res)\r\n      this.url = res.data.data.url;\r\n    });\r\n    // 获取 相关的mv\r\n    axios({\r\n      url: \"https://autumnfish.cn/simi/mv\",\r\n      method: \"get\",\r\n      params: {\r\n        mvid: this.$route.query.q\r\n      }\r\n    }).then(res => {\r\n      // console.log(res)\r\n      // 保存相关MV\r\n      this.simiMvs = res.data.mvs;\r\n      for(let i=0;i<this.simiMvs.length;i++){\r\n          if(this.simiMvs[i].playCount>100000){\r\n              this.simiMvs[i].playCount=parseInt(this.simiMvs[i].playCount/10000)+'万'\r\n            }\r\n          let duration = this.simiMvs[i].duration;  \r\n          let min = parseInt(duration/1000/60);\r\n          if(min<10){\r\n            min='0'+min\r\n          }\r\n          let sec = parseInt(duration/1000%60)\r\n          if(sec<10){\r\n            sec='0'+sec\r\n          }\r\n          //console.log(min+\" \"+sec)\r\n          this.simiMvs[i].duration=`${min}:${sec}`\r\n        }\r\n    });\r\n\r\n    // 获取 mv的信息\r\n    axios({\r\n      url: \"https://autumnfish.cn/mv/detail\",\r\n      method: \"get\",\r\n      params: {\r\n        mvid: this.$route.query.q\r\n      }\r\n    }).then(res => {\r\n      // console.log(res)\r\n      // mv的信息\r\n      this.mvInfo = res.data.data;\r\n      // 获取 歌手信息\r\n      axios({\r\n        url: \"https://autumnfish.cn/artists\",\r\n        method: \"get\",\r\n        params: {\r\n          id: this.mvInfo.artists[0].id\r\n        }\r\n      }).then(res => {\r\n        // console.log(res);\r\n        // 歌手的封面信息\r\n        this.icon = res.data.artist.picUrl\r\n      });\r\n    });\r\n    this.getcomments();\r\n    // 获取评论数据\r\n  //   axios({\r\n  //     url:\"https://autumnfish.cn/comment/mv\",\r\n  //     method:'get',\r\n  //     params:{\r\n  //       id:this.$route.query.q,\r\n  //       limit:10,\r\n  //       offset:0\r\n  //     }\r\n  //   }).then(res=>{\r\n  //     console.log(res)\r\n  //   })\r\n   },\r\n  methods: {\r\n\r\n     getMvList(){\r\n     axios({\r\n      url:' https://autumnfish.cn/comment/mv',\r\n      method:'get',\r\n      params:{\r\n        id:this.$route.query.q,\r\n        limit:this.limit,\r\n        offset:(this.page-1)*this.limit\r\n      }\r\n    }).then(res => {\r\n      console.log(res);\r\n      this.hotComments=res.data.hotComments;\r\n      this.comments=res.data.comments;\r\n    })\r\n    },\r\n    //评论\r\n    getcomments(){\r\n       //mv评论\r\n   axios({\r\n      url:' https://autumnfish.cn/comment/mv',\r\n      method:'get',\r\n      params:{\r\n        id:this.$route.query.q,\r\n        limit:this.limit,\r\n        offset:(this.page-1)*this.limit\r\n      }\r\n    }).then(res => {\r\n      //console.log(res);\r\n      this.hotComments=res.data.hotComments;\r\n      this.hotTotal=this.hotComments.length;\r\n      this.comments=res.data.comments;\r\n      this.total=res.data.total;\r\n      for(let i=0;i<this.hotComments.length;i++){\r\n          var unixTimestamp = new Date(this.hotComments[i].time) ;\r\n          //重载方法\r\n          Date.prototype.toLocaleString = function() {\r\n                this.hour = this.getHours() < 10 ? \"0\" + this.getHours() : this.getHours();\r\n                this.minute = this.getMinutes() < 10 ? \"0\" + this.getMinutes() : this.getMinutes();\r\n                this.second = this.getSeconds() < 10 ? \"0\" + this.getSeconds() : this.getSeconds();\r\n                return this.getFullYear() + \"/\" + (this.getMonth() + 1) + \"/\" + this.getDate() + \"/ \" + this.hour  + \":\" + this.minute + \":\" + this.second;\r\n          };\r\n          this.hotComments[i].time = unixTimestamp.toLocaleString();\r\n        }\r\n         for(let i=0;i<this.comments.length;i++){\r\n          var unixTimestamp = new Date(this.comments[i].time) ;\r\n          //重载方法\r\n          Date.prototype.toLocaleString = function() {\r\n                this.hour = this.getHours() < 10 ? \"0\" + this.getHours() : this.getHours();\r\n                this.minute = this.getMinutes() < 10 ? \"0\" + this.getMinutes() : this.getMinutes();\r\n                this.second = this.getSeconds() < 10 ? \"0\" + this.getSeconds() : this.getSeconds();\r\n                return this.getFullYear() + \"/\" + (this.getMonth() + 1) + \"/\" + this.getDate() + \"/ \" + this.hour  + \":\" + this.minute + \":\" + this.second;\r\n          };\r\n          this.comments[i].time = unixTimestamp.toLocaleString();\r\n        }\r\n    })\r\n    },\r\n    // 去mv详情页\r\n      toMV(id){\r\n      this.$router.push(`/mv?q=${id}`)\r\n\t\t\tthis.$router.go(0)\r\n      },\r\n    handleCurrentChange(val) {\r\n      this.page=val;\r\n      this.getMvList()\r\n      this.getcomments()\r\n    }\r\n  \r\n  },\r\n  \r\n  \r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}